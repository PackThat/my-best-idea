name: heartbeat

on:
  schedule:
    - cron: '0 0 */6 * *'
  workflow_dispatch: {}

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Call heartbeat function
        env:
          HEARTBEAT_URL: ${{ secrets.HEARTBEAT_URL }}
        run: |
          http_code=$(curl -s -o /tmp/heartbeat_response.json -w "%{http_code}" -X POST "$HEARTBEAT_URL")
          echo "HTTP status: $http_code"
          cat /tmp/heartbeat_response.json || true